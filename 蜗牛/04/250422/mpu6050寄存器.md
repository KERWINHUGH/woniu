## PWR_MGMT_1   0x01  

**地址：0x6B**

此寄存器允许用户配置电源模式和时钟源，同时提供一个位来重置整个设备，以及一个位来禁用温度传感器。
将 **SLEEP** 设置为 1 时，MPU-60X0 会进入低功耗的睡眠模式。当 **SLEEP** 被禁用且 **CYCLE** 设置为 1 时，MPU-60X0 将进入循环模式。在循环模式中，设备在睡眠模式和唤醒模式之间循环，以预设频率从活动传感器中采集单次样本。采样频率由 **LP_WAKE_CTRL**（寄存器108）控制。要配置唤醒频率，请在电源管理2寄存器（寄存器108）中使用 **LP_WAKE_CTRL**。

可以选择内部8 MHz振荡器、基于陀螺仪的时钟或外部时钟源作为MPU-60X0的时钟源。当选择内部8 MHz振荡器或外部源作为时钟源时，MPU-60X0可以在禁用陀螺仪的情况下运行于低功耗模式。

上电时，MPU-60X0 的时钟源默认为内部振荡器。为了提高稳定性，强烈建议将设备配置为使用其中一个陀螺仪（或外部时钟源）作为时钟参考。可以根据以下表格选择时钟源：

| CLKSEL | 时钟源                        |
| ------ | ----------------------------- |
| 0      | 内部 8MHz 振荡器              |
| 1      | 使用 X 轴陀螺仪的 PLL 参考    |
| 2      | 使用 Y 轴陀螺仪的 PLL 参考    |
| 3      | 使用 Z 轴陀螺仪的 PLL 参考    |
| 4      | 使用外部 32.768kHz 参考的 PLL |
| 5      | 使用外部 19.2MHz 参考的 PLL   |
| 6      | 保留                          |
| 7      | 停止时钟并保持定时生成器复位  |

参数：
**DEVICE_RESET**

- 设置为1时，此位将所有内部寄存器重置为默认值。重置完成后，该位会自动清零为0。每个寄存器的默认值可在第3节中找到。

**SLEEP**

- 设置为1时，该位会将MPU-60X0置于睡眠模式。

**CYCLE**

- 当此位设置为1且**SLEEP**被禁用时，MPU-60X0将在睡眠模式和唤醒之间循环，以**LP_WAKE_CTRL**（寄存器108）设置的频率从活动传感器中采集单次样本。

**TEMP_DIS**

- 设置为1时，此位禁用温度传感器。

**CLKSEL**   

- 3位无符号值，指定设备的时钟源。

## PWR_MGMT_2  0x00

描述：
此寄存器允许用户在仅加速度计低功耗模式下配置唤醒频率，同时允许用户将加速度计和陀螺仪的单个轴置于待机模式。

通过在电源管理1寄存器（寄存器107）中将**PWRSEL**设置为1，MPU-9150可以进入仅加速度计低功耗模式。在此模式下，设备将关闭除主I2C接口以外的所有设备，仅在固定时间间隔唤醒加速度计进行一次测量。唤醒频率可以使用**LP_WAKE_CTRL**配置，如下表所示：

| **LP_WAKE_CTRL** | **唤醒频率** |
| ---------------- | ------------ |
| 0                | 1.25 Hz      |
| 1                | 2.5 Hz       |
| 2                | 5 Hz         |
| 3                | 10 Hz        |

更多关于MPU-9150的电源模式信息，请参考寄存器107。

用户可以通过此寄存器将加速度计和陀螺仪的各个轴置于待机模式。如果设备使用某个陀螺仪轴作为时钟源，并将该轴置于待机模式，时钟源将自动切换为内部8MHz振荡器。

参数：

- **LP_WAKE_CTRL**：2位无符号值，指定仅加速度计低功耗模式下的唤醒频率。
- **STBY_XA**：设置为1时，将X轴加速度计置于待机模式。
- **STBY_YA**：设置为1时，将Y轴加速度计置于待机模式。
- **STBY_ZA**：设置为1时，将Z轴加速度计置于待机模式。
- **STBY_XG**：设置为1时，将X轴陀螺仪置于待机模式。
- **STBY_YG**：设置为1时，将Y轴陀螺仪置于待机模式。
- **STBY_ZG**：设置为1时，将Z轴陀螺仪置于待机模式。





## SMPLRT_DIV  0x02  

描述：  
此寄存器指定用于生成MPU-60X0的采样率的陀螺仪输出速率的分频器。  

传感器寄存器输出、FIFO输出、DMP采样、运动检测、零运动检测和自由落体检测都基于该采样率。  

采样率通过将陀螺仪输出速率除以 **SMPLRT_DIV** 来生成：
\[ \text{采样率} = \frac{\text{陀螺仪输出速率}}{1 + \text{SMPLRT_DIV}} \]

其中，当低通滤波器（DLPF）禁用（DLPF_CFG = 0 或 7）时，陀螺仪输出速率为8kHz；启用低通滤波器时（DLPF_CFG 设置为其他值），输出速率为1kHz（参见寄存器26）。  

**注意**：加速度计输出速率为1kHz，这意味着当采样率超过1kHz时，相同的加速度计样本可能会多次输出到FIFO、DMP和传感器寄存器。  

更多关于陀螺仪和加速度计信号路径的图示，请参见MPU-6000/MPU-6050产品规格文档的第8节。  

参数：  

- **SMPLRT_DIV**：8位无符号值。采样率由陀螺仪输出速率除以该值确定。



## CONFIG  0x06

描述：  
此寄存器用于配置外部帧同步（FSYNC）引脚的采样和数字低通滤波器（DLPF）设置，适用于陀螺仪和加速度计。

外部信号连接到FSYNC引脚后，可通过配置**EXT_SYNC_SET**进行采样。FSYNC引脚的信号变化会被锁存，以捕获短暂脉冲。该锁存的FSYNC信号将按照寄存器25中定义的采样率进行采样，采样后，锁存器将重置为当前FSYNC信号状态。  
采样值会根据EXT_SYNC_SET的设置替代传感器数据寄存器中的最低有效位，具体位置如下表所示：

| EXT_SYNC_SET | FSYNC位位置     |
| ------------ | --------------- |
| 0            | 输入禁用        |
| 1            | TEMP_OUT_L[0]   |
| 2            | GYRO_XOUT_L[0]  |
| 3            | GYRO_YOUT_L[0]  |
| 4            | GYRO_ZOUT_L[0]  |
| 5            | ACCEL_XOUT_L[0] |
| 6            | ACCEL_YOUT_L[0] |
| 7            | ACCEL_ZOUT_L[0] |

**DLPF** 通过**DLPF_CFG**设置。加速度计和陀螺仪会根据DLPF_CFG的值进行滤波，具体参数如下表：

可以让输出的数据更加平滑，配置的数据越大，抖动就越小，0是不使用低通滤波器

| DLPF_CFG | 加速度计带宽 (Hz) | 延迟 (ms) | 陀螺仪带宽 (Hz) | 延迟 (ms) | 采样频率 (kHz) |
| -------- | ----------------- | --------- | --------------- | --------- | -------------- |
| 0        | 260               | 0         | 256             | 0.98      | 8              |
| 1        | 184               | 2.0       | 188             | 1.9       | 1              |
| 2        | 94                | 3.0       | 98              | 2.8       | 1              |
| 3        | 44                | 4.9       | 42              | 4.8       | 1              |
| 4        | 21                | 8.5       | 20              | 8.3       | 1              |
| 5        | 10                | 13.8      | 10              | 13.4      | 1              |
| 6        | 5                 | 19.0      | 5               | 18.6      | 1              |
| 7        | 保留              | 保留      | 保留            | 保留      | 8              |

**参数**：

- **EXT_SYNC_SET**：3位无符号值，用于配置FSYNC引脚的采样。
- **DLPF_CFG**：3位无符号值，用于配置DLPF的设置。



## GYRO_CONFIG  0x18

描述：  
此寄存器用于触发陀螺仪自检并配置陀螺仪的满量程范围。陀螺仪自检允许用户测试陀螺仪的机械和电气部分。通过控制寄存器中的 **XG_ST**、**YG_ST** 和 **ZG_ST** 位，可以独立或同时激活每个陀螺仪轴的自检。  

当激活自检时，板载电子元件将驱动相应的传感器。该驱动会使传感器的质量元件移动一定距离，相当于预定义的科里奥利力。这种质量元件的位移会导致传感器输出信号的变化，反映在输出信号中。自检响应定义为：
\[ \text{自检响应} = \text{启用自检时的传感器输出} - \text{禁用自检时的传感器输出} \]

每个陀螺仪轴的自检限制在MPU-6000/MPU-6050产品规格文档的电气特性表中提供。当自检响应的值在产品规格的最小/最大限制范围内时，组件通过自检；如果自检响应超过文档中指定的最小/最大值，则该组件被认为自检失败。

**FS_SEL** 用于根据下表选择陀螺仪输出的满量程范围：

| FS_SEL | 满量程范围                       |
| ------ | -------------------------------- |
| 0      | ± 250 °/s                        |
| 1      | ± 500 °/s                        |
| 2      | ± 1000 °/s                       |
| 3      | ± 2000 °/s       -32768~  +32767 |

第2位到第0位保留。

**参数**：
- **XG_ST**：设置此位会使X轴陀螺仪进行自检。
- **YG_ST**：设置此位会使Y轴陀螺仪进行自检。
- **ZG_ST**：设置此位会使Z轴陀螺仪进行自检。
- **FS_SEL**：2位无符号值，选择陀螺仪的满量程范围。







## ACCEL_CONFIG  0x18

描述：  
此寄存器用于触发加速度计自检并配置加速度计的满量程范围，同时配置数字高通滤波器（DHPF）。

加速度计自检允许用户测试加速度计的机械和电气部分。通过控制寄存器中的 **XA_ST**、**YA_ST** 和 **ZA_ST** 位，可以独立或同时激活每个加速度计轴的自检。

当激活自检时，板载电子元件将驱动相应的传感器。该驱动模拟外部力，驱动的传感器将产生相应的输出信号，该信号用于观察自检响应。自检响应定义为：
\[ \text{自检响应} = \text{启用自检时的传感器输出} - \text{禁用自检时的传感器输出} \]

每个加速度计轴的自检限制在MPU-6000/MPU-6050产品规格文档的电气特性表中提供。当自检响应的值在产品规格的最小/最大限制范围内时，组件通过自检；如果自检响应超过文档中指定的最小/最大值，则该组件被认为自检失败。

**AFS_SEL** 用于根据下表选择加速度计输出的满量程范围：
| AFS_SEL | 满量程范围               |
| ------- | ------------------------ |
| 0       | ± 2g                     |
| 1       | ± 4g                     |
| 2       | ± 8g                     |
| 3       | ± 16g   ---32768  +32767 |

**ACCEL_HPF** 配置用于运动检测器（如自由落体、运动阈值和零运动）路径中的DHPF。高通滤波器的输出不提供给数据寄存器（请参见MPU-6000/MPU-6050产品规格文档第8节的图示）。

高通滤波器有三种模式：
- **复位**：滤波器输出在一个采样周期内归零，有效禁用高通滤波器。此模式可以切换以快速使滤波器稳定。
- **开启**：高通滤波器将通过截止频率以上的信号。
- **保持**：触发时，滤波器保持当前采样。滤波器输出为输入样本与保持样本之间的差值。

**ACCEL_HPF** 滤波模式的截止频率如下：

高通滤波器，对数据输出没影响

| 模式 | 截止频率 |
| ---- | -------- |
| 0    | 复位     |
| 2    | 开启     |
| 3    | 开启     |
| 4    | 开启     |
| 7    | 保持     |

**参数**：
- **XA_ST**：设置为1时，X轴加速度计进行自检。
- **YA_ST**：设置为1时，Y轴加速度计进行自检。
- **ZA_ST**：设置为1时，Z轴加速度计进行自检。
- **ACCEL_FS_SEL**：2位无符号值，选择加速度计的满量程范围。
- **ACCEL_HPF**：3位无符号值，选择数字高通滤波器的配置。



## 高通滤波和低通滤波的区别

>在MPU6050传感器中，高通滤波和低通滤波是两种常见的信号处理方法，它们分别用于不同的场景，帮助改善数据的质量和适应不同的应用需求。以下是它们的解释：
>
>### 1. **低通滤波 (Low-pass Filter)**
>
>**定义**：低通滤波器允许低频信号通过，阻止高频信号。也就是说，它可以去除信号中的高频噪声，保留平稳的低频成分。
>
>**应用场景**：
>
>- **加速度计数据**：由于加速度计测量的是物体的线性加速度，低频成分代表了物体的主要运动趋势，而高频成分通常是由于微小的振动或噪声引起的。在动态环境下，低通滤波可以帮助去除由于振动和外部干扰造成的高频噪声，使得加速度计数据更加平稳。
>- **避免误差**：当你希望获得更平稳的加速度数据，或者当加速度变化较慢时（比如静态或缓慢的移动），低通滤波是一个有效的手段。
>
>**如何实现**： MPU6050内部提供了一个数字低通滤波器（DLPF），你可以设置滤波器的截止频率（例如 256 Hz、188 Hz等）。通过调整这个频率，可以控制滤波器的影响程度，去除高频噪声。
>
>### 2. **高通滤波 (High-pass Filter)**
>
>**定义**：高通滤波器允许高频信号通过，阻止低频信号。它可以去除信号中的低频成分，保留高频变化。
>
>**应用场景**：
>
>- **陀螺仪数据**：陀螺仪测量的是物体的角速度，通常对短期的快速旋转感兴趣。高频的变化可能代表了真实的动态运动，而低频的成分可能是由传感器的漂移或长期的静止状态造成的。高通滤波可以去除这些低频漂移，从而使角速度数据更加可靠。
>- **去除静态偏差**：高通滤波在去除加速度计的静态加速度或陀螺仪的偏置漂移时特别有用。它可以有效地去除由于长时间静止或微小偏移产生的低频噪声，尤其在动态运动中，去除这种漂移可以帮助获取更真实的动态信号。
>
>**如何实现**： MPU6050的高通滤波器通常可以通过配置陀螺仪的数字滤波器来实现。例如，可以通过设置高通滤波器的截止频率来去除低频噪声。
>
>### 总结：
>
>- **低通滤波**：适用于去除加速度计数据中的高频噪声，尤其是在静态或低速运动场景下，帮助保持数据的平稳。
>- **高通滤波**：适用于去除陀螺仪数据中的低频漂移，尤其是在快速动态运动中，帮助提高角速度测量的准确性。
>
>### 在实际应用中的选择：
>
>- 如果你的应用要求精准的动态数据，并且受到了环境噪声（如震动）的干扰，可能会选择使用**低通滤波**来平滑加速度计数据。
>- 如果你需要检测快速的运动变化，或者你需要去除由于传感器漂移产生的低频噪声，**高通滤波**会是更好的选择。