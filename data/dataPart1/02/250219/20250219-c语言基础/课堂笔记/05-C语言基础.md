## C语言基础

### 课程目标

1. 理解编程语言和C语言
2. 掌握C语言的各种基础语法
3. 掌握各种进制之间的转换

#### 一、C语言介绍

##### 1、编程语言

（2）编程语言概念和分类

编程语言是指**编写计算机程序（即代码）的语言**。计算机发展到现在，有很多不同的编程语言来应对不同的程序应用场景。同时不同的编程语言也有自己的语法，那么开发者就要持续学习和练习编程语言自己的语法来刻意的训练自己的编程水平。

编程语言可以根据是否需要编译和特性不同进行分类：

- 根据是否需要编译进行分类
  - 编译型语言：c、c++、java、go等
  - 解释性语言：JavaScript、Python、php等
- 根据特性不同来区分
  - 面向过程：c、JavaScript（两者都可）、Python（两者都可）
  - 面向对象：java、c++、c#等

以下图示常见的编程语言：

![image-20240402115251846](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240402115251.png)

（3）编程语言发展简史

- 第一阶段：机器语言

送入计算机的数字，字母，符号等信息必须转换成 0、1 组合的数据形式才能被计算机接收、存储并进行运算。因此早期直接使用机器指令(0，1 序列)来设计程序，可以被计算机系统直接识别。和自然语言完全不同，难于记忆和理解，工作量大，效率低，无法移植。受限于早期计算机输入、输出和存储设备的限制，人们必须利用打孔技术在纸带上打上一系列有规律的孔点，带孔为 1，无孔为 0，经过光电扫描输入电脑。



- 第二阶段：汇编语言

由于机器语言过于复杂、困难，且打孔纸带不便修改与保存，因此机器语言的升级版——汇编语言便应运而生。汇编语言（assembly language）可以视为机器语言的升级版，使用助记符代替机器语言的二进制码，把机器指令符号化，即通过一组简单的的符号来表示机器指令，更接近于自然语言，更容易理解和使用。通常情况下来说，不同的机器指令集对应不同的汇编语言，因此不同版本的汇编语言不可直接移植。如：

```c
MOV R1, 1000 //R1=1000
MOV R2, 2000 //R2=2000
ADD R1,R1,R2 //R1=R1+R2
```

- 第三阶段：高级语言

汇编语言对于新手程序员来说仍然过于晦涩难懂，且汇编语言不便移植的特点也一定程度限制了汇编语言的流行。因此，汇编语言的升级版——高级编程语言出现了。语法接近人类的自然语言；执行的单位不是指令，而是语句；开发效率较高；必须编译成机器码；移植性较好；

```c
#inlcude <stdio.h>
int main(int argc, char *argv[]) {
    int sum = 0;
    int num1 =1000;
    int num2 = 2000;
    sum  = num1 + num2;
    printf(sum);
    return 0;
}
```

![image-20240612151516633](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240612151516.png)

- 第四阶段：自然语言

运用人工智能，以接近口音的指令指挥计算机; 还没有成熟;目前就大模型可以编写局部功能代码，但还需要程序员来排查。未来可期

![image-20240402142022649](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240402142022.png)

##### 2、C语言

（1）c语言版本历史

C 语言属于面向过程的编译型编程语言，它由早期的编程语言BCPL（Basic Combined Programming Language）发展演变而来。

以下是几个重要的版本：

1. C语言的起源可以追溯到1972年，由贝尔实验室的Dennis Ritchie开发，最初是为了开发UNIX操作系统而设计的一种高级编程语言。
2. 在1978年，美国国家标准学会（ANSI）发表了C语言的**第一个标准**，被称为ANSIC或**C89**。这个标准对C语言的语法、语义和库进行了规范，使得C语言成为了一种通用的、可移植的编程语言。
3. 在1990年，国际标准化组织（ISO）也发布了一个与ANSIC兼容的国际标准，称为**ISO C90**。
4. 在1999年，ISO发布了一个新的C语言标准，称为**C99**。C99引入了许多新特性，包括更灵活的数组初始化、变长数组、内联函数、布尔类型等。这些新特性使得C语言更加强大和灵活。
5. 在2011年，ISO发布了最新的C语言标准，称为**C11**。C11标准进一步扩展了C语言的功能，包括多线程支持、泛型宏、匿名结构体等。目前比价普及的就是c99以及c11

自c语言发布之后，因为其很高的性能以及对底层硬件的操作，迅速的流行普及开来，后来，unix系统利用c语言重构之后，linux和c语言就相互成就，普及到全世界。



（2）c语言的应用场景

1. 系统编程：C语言被广泛用于操作系统、嵌入式系统和驱动程序开发，因为它可以直接访问硬件和操作系统的底层功能。
2. 嵌入式系统开发：C语言在嵌入式系统开发中扮演着重要的角色，因为它可以轻松地访问和控制硬件，来开发各种嵌入式设备，如智能手机、汽车电子系统、家用电器等。
3. 游戏开发：C语言在游戏开发中得到广泛应用，因为它可以提供高性能和低延迟的处理能力，同时也提供了直接访问图形和音频库的接口。
4. 编译器和解释器开发：C语言本身是编译型语言，因此它非常适合用于开发编译器和解释器，如编译器前端、后端、解释器、虚拟机等。
5. 数据库系统：C语言在数据库系统的开发中广泛应用，因为它可以提供高效的数据处理和存储管理能力，这对于大规模数据处理和高性能数据库系统至关重要。
6. 网络编程：C语言提供了丰富的网络编程库，如Socket，使得开发网络应用程序和协议成为可能，如Web服务器、网络客户端等。
7. 科学计算和数值分析：C语言具有高性能和丰富的数学库，使得它非常适合用于科学计算、数值模拟和数据分析等领域，如物理学、工程学、金融学等。
8. 图形界面开发：C语言可以用于开发图形界面工具包或库，如GTK+、Qt等，用于创建图形界面应用程序。

（3）c语言特点

1. **系统编程**：由于可以直接操作内存地址和硬件，所以很适合做底层编程，如嵌入式系统、驱动程序开发
2. **高效性**：C语言生成的代码效率非常高，这主要得益于其简单的运行时支持和对底层硬件操作的直接支持
3. **可移植性**：可以在众多平台上运行（借助编译器）
4. **轻量灵活**：c语言的语法并不复杂，使得可以用来编写非常高效的程序，但同时对于内存或其他硬件方面的操作需要开发者小心应对
5. **通用语言**：因为后续发展起来的很多语言都是参考了c语言的语法，所以学会了c语言，在学习其他语言基础就会很快

#### 二、第一个C语言程序

##### 1、c程序的标准架构

（1）c文件基础架构

c语言代码一般是写在以`.c`结尾的文件中，如之前的`hello.c`，并且一个c程序代码文件会有一个基本的代码架构，如下所示：

```c
#include <stdio.h>

int main(int argc, char *argv[]) {
    printf("Hello world!\n");
    printf("可以执行多句代码，执行return后程序正常结束，\n");
    return 0;
}
```

- 我们第一个程序的说明

![image-20241223095930624](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yujian/20241223095930.png)

`#include<stdio.h>`：标准 I/O 头文件，下文中的 printf 需要使用这个文件

main()：主函数，一个程序的入口。一个程序有且只有一个 main()函数

`int`：代表主函数的返回值类型是 int 型

`printf()`：格式化输出，将括号内的内容打印到显示器上，打印字符串(文本)需要用双引号""引上

`return 0;`：配合主函数类型使用，一般来说返回 0 的程序表示程序运行成功

```c
gcc c文件名称 
    
./a.out
```



##### 2、c语言编译过程

之前我们学习vim的时候，演示过c代码的执行过程，需要调用`gcc`命令来对c文件进行编译操作，之后才能运行编译后的文件`a.out`才能正常执行。

![image-20240612152300271](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240612152300.png)

（1）gcc

gcc是<span style="font-size:16px;color:black;font-weight:bold;"> GNU Complier Collection </span>的缩写。最初是作为C语言的编译器(GNU C Compiler)，现在已经支持多种语言了，如 C、C++、Java、Ada、COBOL语言等。

（2）c语言为什么需要编译才能运行

主要有以下原因：

- **语言编译**：计算机只能执行机器指令，而c语言作为高级语言，编写的代码计算机并不能识别，所以需要将c语言进行编译之后才能运行，而编译器就是这个作用，同时将代码尽量编译成高性能的机器指令
- **可移植性**：不同操作系统只要有c语言对应的编译器，而同样的c语言代码就可以实现在不同平台上执行
- **语法检查**：编译过程中如果有语法错误，编译器夜壶给出错误信息，帮助开发者检查语法错误，有助于编写可运行代码。

（3）gcc的工作流程

当写好一个c程序代码之后，利用gcc进行编译，要经过四个阶段：

- 预处理（Pre-Processing）

- 编译（Compiling）

- 汇编（Assembling）

- 链接（Linking)

![image-20240402145513475](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240402145513.png)

具体的每个阶段内容：

- 第一阶段：**预处理阶段**
  - 内容：包含了去掉注释，加载头文件，代替宏定义，条件编译等内容，这个阶段就会把.c编译成`.i`后缀的同名文件。比如`gcc -E hello.c -o hello.i`
  - 得到：`.c`同名文件，即预处理后的 C 原始程序
- 第二阶段：**编译阶段**
  - 内容：经过语法分析和优化之后将源代码生成相应的汇编代码的过程。比如`gcc -S hello.i -o hello.s`
  - 得到：`.s`同名文件，即汇编语言原始程序
- 第三阶段：**汇编阶段** 
  - 内容：将第二步生成的汇编语言转为机器码文件。比如`gcc -c hello.s -o hello.o`
  - 得到`.o`同名文件。
- 第四阶段：**链接阶段**
  - 内容：将第三步的机器码文件和其他引入的头文件及相关的文件进行链接，然后打包为一个最终可执行的文件。比如`gcc hello.o -o hello`
  - 得到：一个最终可以执行的同名文件，没有后缀名。
  - 理解：

（4）gcc的可使用参数

| 选项名 | 作用                                                         |
| ------ | ------------------------------------------------------------ |
| -E     | 预编译后停下来，生成后缀为 `.i`的预编译文件                  |
| -S     | 汇编后停下来，生成后缀为 `.s`的汇编源文件                    |
| -c     | 只编译，不链接成为可执行文件。编译器只是由输入的 `.c`等源代码文件生成 `.o` 为后缀的目标文件，通常用于编译不包含主程序的子程序文件 |
| -o     | 产生目标文件( `.i`、`.s`、`.o` 可执行文件等)，如果不给出这个文件名称选项，gcc就给出默认的可执行文件 `a.out` |
| -Wall  | 使用gcc对源文件的代码有问题的地方发出警告                    |

（5）gcc使用例子

```c
// 1.生成后缀为.i的预编译文件
gcc -E helloWorld.c -o helloWorld.i
// 2.生成后缀为 .s 的汇编源文件
gcc -S  helloWorld.c -o helloWorld.s 
// 3.生成 .o 为后缀的目标文件
gcc -c  helloWorld.s -o helloWorld.o      
// 4.生成可执行文件
gcc helloWorld.o -o helloWorld   
// 5.生成默认的a.out可执行文件(一步顶过去四步，缺点是名字一样)
gcc helloWorld.c
```

##### 3.指定编译后的可执行文件

- 通过`gcc`可以一步到位，直接执行四个阶段，生成一个指定名称的可执行文件

  ```c
  gcc c文件路径 -o 可执行文件名称
  ```

  - `-o`:指定参数，将编译后的内容输出到指定文件,output

#### 三、C语言注释

注释是一种在编程中用来解释或描述代码作用和逻辑的文本，它不会被编译器或解释器执行。就相当于是对代码的解释或说明。根据注释是否多行来区分有两类注释：

- 单行注释
- 多行注释

##### 1、单行注释

（1）语法

以`//`开头的即为单行注释

```c
//这是一行注释，下面代码用于输出hello
printf("hello");
printf("hello\n"); //也可以跟在代码后面，不影响代码执行，表示显示hello后换行
```

##### 2、多行注释

以`/**/`为范围的就是多行注释

```c
/*
这里的都是注释
这里也是
*/
printf("hello/n");/*也可以同行，一般多行不这么用*/
```

总结：单行注释和多行注释实际都时非常常用的，具体用哪一个看开发者个人喜好，但一定要养成写注释的习惯，对新手复盘很友好。

##### 3、预处理注释

（1）概念

c语言除了基本的单行和多行注释之外，额外的提供了一种预处理注释。是一种可以包含一段代码的注释，根据指定的条件为0还是1来决定是否要执行里面的代码

（2）使用示例

```c
#include <stdio.h>
 
#if 0
    // 这里是预处理注释
    // 如果#if 后面跟的数字或表达式结果是0，则表示不执行#if之后,#endif之前的代码
    // 如果#if 后面的数字或表达式的结果是非0,则表示一定执行这段代码
    // 你可以在这里定义宏或其他预处理指令
    #define MESSAGE "Hello world_9999!\n"
#else
    #define MESSAGE "Hello world_++++!\n"
#endif	// 这里是结束预处理部分


int main(int argc, char *argv[]) {
	 // 输出预处理定义的字符串
	 printf(MESSAGE);
}
```



#### 四、C语言的变量

##### 1、变量的概念

变量是指一个**可以保存数据的容器**。定义变量并且赋予数据之后，我们在程序中就可以用这个变量来指代这个数据了，即利用变量可以重复使用某个数据。

##### 2、变量的语法

（1）定义一个变量

```c
1. 只定义不赋予数据
数据类型 变量名; 

2. 定义并赋予数据
数据类型 变量名 = 要保存的数据;
```

例子：

```c
int number1=20;
int number2 =10; 变量number2里面就保存了数据10，int会限制变量只能保存一个整数
```

这个例子中，我们借助了`int`特殊字母来表示定义的变量用于保存一个**整型**的数据。一共定义了两个变量，一个`number1`定义未赋值，一个`number2`定义并有默认数据为`10`。我们可以先借助printf来进行输出变量的值:

```c
printf("number1变量的值为:%d",number1);//number1变量的值为:20
printf("number2变量的值为:%d",number2);//number1变量的值为:10
```

说明：在输出语句中，会将%d,替换为要输出变量保存的数据并打印

（2）修改变量的值

当我们想在变量**定义之后**再修改变量保存的数据或定义之后进行第一次赋值，那么可以借助以下语法

```c
变量名 = 新数据;
```

其中的变量名必须是**已定义的**，同时，新数据需要跟定义变量指定的数据类型要一致。比如是int型的变量，修改后的数据也是整型数字

（3）变量名规范

c语言的变量名需要满足以下条件：

- **字母数字下划线**：C语言中的变量名只能包含字母（a-z，A-Z）、数字（0-9）和下划线（_）
- **不以数字开头**：变量名必须以字母或下划线开头，不能使用数字开头。
- **区分大小写**：C语言是区分大小写的，这意味着`Variable`、`variable`、`VaRiAbLe`是三个完全不同的变量。
- **避免关键字**：不能使用C语言的保留字和关键词作为变量名，如`int`、`return`等。
- **可读性**：尽量见词达意，如`number1`、`totalPrice`等，避免`a1`、`a_1`等无明显意义的变量名
- **推荐：小驼峰命名**：如果遇到多个单词构成的变量名，推荐，首单词全小写，后面每个单词的首字母大写。

（4）变量名特点

- 不能重复定义 （同一作用域下）
- 先定义后使用
- 变量需要赋值后才能使用 （初始化问题）

##### 3、变量的本质（合并到数据类型之后讲，这里不讲）

#### 五、数据类型

生活中的数据：姓名、年龄：short、身高、体重、手机号、性别、工资：、今天是什么日子？银行卡余额、电影票、订单。

2024/09/03

2000.5

男 

23

75.5kg

张三

3栋一单元2606

##### 1、数据类型分类

C语言提供了很多数据类型供我们使用，我们将数据分类为下：

- 基础数据类型	
  - char
  - short
  - int
  - long
  - float
  - double
  - “bool” 
- 构造数据类型
  - 函数
  - 数组
  - 结构体
  - 共用体（联合）
  - 枚举
- 指针类型
- 空类型
  - void

<img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240407144647.jpg" alt="QQ图片20240407144610" style="zoom: 67%;" />

##### 2、基本数据类型

（1）基本定义和使用

| 数据类型        | 存储大小     | 值范围                                            | 描述                          |
| --------------- | ------------ | ------------------------------------------------- | ----------------------------- |
| char            | 1 字节       | -128 到 127 或 0 到 255                           | 用于存储字符类型的数据        |
| short           | 2 字节       | -32,768 到 32,767                                 | 用于存储较小的整数            |
| int             | 4 字节       | -2,147,483,648 到 2,147,483,647                   | 用于存储整数                  |
| long            | 4 或 8 字节  | -2^63到 2^63-1 或 -2,147,483,648 到 2,147,483,647 | 用于存储较大的整数            |
| float           | 4 字节       | 1.2E-38 到 3.4E+38                                | 用于存储单精度浮点数          |
| double          | 8 字节       | 2.3E-308 到 1.7E+308                              | 用于存储双精度浮点数          |
| unsigned  short | 依基类型决定 | 0 到 65,535 或 0 到 4,294,967,295                 | 用于存储非负数                |
| bool            | 1 字节       | 1 或 0（分别表示true和false）                     | 用于存储布尔值（C99标准新增） |

1GB = 1024MB =1024*1024kb = 1024*1024*1024字节

- 将数据类型进行梳理
  - 整型：int、short、long
  - 字符型：char
  - 浮点型：float、double
    - 默认显示小数位为6位，可以在输出时通过`%.nf`来指定小数位，n就是小数的位数
  - 布尔型：_Bool

以下是各类基础数据类型的使用例子:

```c
/***************************************************
# File Name:    05-数据类型.c
# Author:       SuperYu
# Mail:         yujian001002@163.com.com
# Created Time: Wed 19 Feb 2025 02:12:41 PM CST
****************************************************/

#include <stdio.h>
#include <stdbool.h>
 
int main(int argc, char *argv[]) {
	puts("--------------整数----------------------");
	
	char a = 'a';
	printf("字符：%c \n", a);
	printf("字符(数字)：%d \n", a + 10);	

	short b = 100;
	printf("短整型：%d \n", b);
	// c语言中，整数默认是int类型的
	int c = 1000;
	printf("整型：%d \n", c);
	
	long d = 1000L;
	printf("长整型：%ld \n", d);

	puts("--------------浮点数（小数）----------------------");
	// c 语言中，小数默认是double类型的
	float f = 5.5f;  // 4个字节：
	printf("浮点数：%f \n", f);

	double ff = 8.888;  // 8个字节
	printf("浮点数：%.2f \n", ff);

	puts("--------------布尔--------------------");

	_Bool boo = 1;
	printf("布尔型：%d \n", boo	);

	bool t = true;  // false
	printf("布尔型2：%d \n", t);

    return 0;
}
```

（2）关于布尔型数据

- 基本概念和使用

C语言在c99版本添加了`_Bool`类型用于表示逻辑中的正确和错误，但实际输出却是以数字1和0来表示（也就是说本质还是一个数字，只是我们人为理解布尔型的true为1，而false为0）。

正常使用`_Bool`类型数据时，如下所示：

```c
_Bool isRight =1;
printf("%d\n",isRight); //1 
```

也就是说实际`_Bool`类型是一个数字，自然我们使用`%d`来输出。

- 使用新头文件来引入加强后的布尔型数据

c语言为了方便开发者使用布尔型数据更自然，同时跟整数数据进行区别，定义了`<stdbool.h>`头文件，将`_Bool`别名为`bool`同时可以直接使用`true`和`false` 来表示1 和0 ，语法如下所示：

```c
#include <stdbool.h>
int main(){
    bool isRight = true;
    printf("%d",isRight);//1
}
```

输出时仍输出为1，就相当于`stdbool.h`可以在使用布尔型变量时更加自然，**但是本质上还是使用的`_Bool`以及用0和1 来表示错误和正确**。

（3）关于单精度(float)和双精度(double)

浮点数是计算机中用于表示数字的一种方式，广泛用于表示带有小数的数字，根据表示数字范围不同，分为单精度和双精度两种：

- 单精度：单精度浮点数占用4个字节（即32位），可以用来表示1.2E-38 到 3.4E+38之间的数字，小数位支持7~9位。本质计算机使用二进制数据来保存。
- 双精度：双精度浮点数在内存中占用8字节（64位），这64位中，1位用于符号位，11位用于指数，而剩下的52位用于尾数。因此，双精度浮点数的精度大约是15位十进制数字，也就是说，最小可以表示15位小数，但实际上是否能够表示取决于该十进制转为二进制过程中是否有精度丢失，还有操作系统的显示
- 在linux系统中printf默认只能打印6位小数。可以使用`printf("%.9f",变量名)`来输出9位小数，当然小数位可以指定。但注意的是能够表示的小数和位数是受二进制位数来限制的，同时部分小数因为转为二进制过程中可能因为除不尽而导致精度丢失，也就是只能得到一个近似值。



#### 六：流程控制-判断

> 当我们需要分支的时候，就能使用到 if 语句

- 示例代码：

  ``` c
   #include <stdio.h>
    9 
   10 int main(int argc, char *argv[]) {
   11     // 流程控制-> 判断判断
   12     char gender = 'M';
   13 
   14     if( gender == 'M' ){
   15         puts("应该去男厕所。");
   16 
   17     }else if(gender == 'F'){
   18         puts("应该去女厕所。");
   19 
   20     }else {
   21         puts("对不起，性别有误！");
   22     }
   23 
   24     puts("-----end-----");
   25     return 0;
   26 }
  ```

  - 练习：

    练习：写一个四则运算，根据运算符，来确定执行的运算类型：















#### 六、数据类型转换

##### 1、 隐式类型转换(自动转换)()

在有多种数据类型混合计算的时候，若未人为控制类型，系统会自动进行类型转换。

（1）转换基本规则

转换的规则是：存储长度较短的转换成存储长度较长的，且不丢失数据（无损转换）。

<img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240403151555.png" alt="image-20240403151555576" style="zoom:67%;" />

当有两个不同数据类型的数据进行数学运算时，那么会根据以上的数据类型转化规则进行**隐形转换**并进行数学运算，得到结果，如下所示：

```c
char a = 'a';
short b = 12;
printf("char short :%d\n",a+b);
unsigned int num1 = 233;
int num2 = 3;
printf("unsigned int int %d\n",num2+num1);
long int big = 444;
printf("long int unsigned: %ld\n",big+num1);
```

- 当char型数据和整形数据进行运算时，char型回根据字符编码（ASCII）规则将字符转为对应的数字。转换表如下：

  ![fcf3b13bfd02453ef0e5fe271a8fa5f5](https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/dengnaiwen/20240613105349.jpeg)

##### 2、浮点数和整型数据赋值转换

- 将浮点型数据赋给整型变量时，舍弃浮点数的小数部分
- 将整型数据赋给浮点型变量时，数值不变，但以浮点数形式存储到变量中

```c
float num2 = 2.3;
int num = num2;
printf("%d",num);//2

int num3 = 3;
float  num4 = num3;
printf("%f",num4);
```

##### 3、double和float类型转换

- 要点：将一个double型数据赋给float变量时，截取其前面7位有效数字，存放到float变量的存储单元

```c
double num4 = 123.456789;
float f = num4;
printf("%f\n",f);//123.456787
```

##### 4、字符类型和整型数据赋值转换

- 要点
  - 将一个整型数据赋给一个char型变量时，只将其低8位原封不动地送到char型变量
  - 字符型数据赋给整型变量时，将字符数据放到整型变量存储单元的低8位中
- 例子

```c
int num10 = 1234;
char ch = num10;
printf("%c\n",ch);//乱码
```

- 当尝试将一个较大的整数（在这个例子中是1234）存储到`char`类型的变量中时，实际存储的值将是原始整数值对`char`能表示的最大值加1的模（即1234取余256后的余数），这个例子中余数为210，而char是通过ASCII码来进行转换，最大支持128，所以210会显示乱码。

##### 5、强制类型转换

（1）概念

人为的将一个变量保存的数据改为另一个数据类型。

（2）语法

```c
(类型名) 表达式；

例子：
int a = 123;
double b = (double)a;
float x  = 2.3;
float y = 2.4;
printf("%d",int(x+y));
```

##### 6、关于数据类型 转换总结

- 面对不同类型的数据转换
  - 如果都是整型，只不过有的小字节，有的是大字节整型（比如short和int），那么可以借助隐形转换，无需任何改动，只不过最后如果要用变量保存运行结果，就用较大字节类型来保存。
  - 如果是整型和浮点型数据处理。那么将整型强制转为浮点型。具体是float还是double，就看另一个参与运算的浮点数类型，保持一致。
  - 如果有一边是char型，直接将char转为对应数据类型即可。

#### 七、c程序中的输入和输出

> 输入和输出和后期的c语言学习过程中很常用

##### 1、概述

- C语言本身没有 I/O, I/O是由C库函数实现的

- 使用这些库函数时，需要包含相应的头文件

  ```c
  #include <stdio.h>
  ```

##### 2、输出

- 目的：向终端输出内容给用户查看

###### 输出语句汇总

| 语句         | 功能                                      | 示例                     |
| ------------ | ----------------------------------------- | ------------------------ |
| puts()       | 只能输出字符串，并且输出结束后会自动换行  | puts("C语言学习");       |
| putchar()    | 只能输出单个字符                          | putchar('a');            |
| **printf()** | **可以输出各种类型的数据**， 不会自动换行 | **printf("%d\n", num);** |

###### printf

- 格式：printf(“格式控制串”，输出表列)

  - 格式控制串
    - 格式说明：%[修饰符]格式字符，用于指定输出格式
    - 普通字符：原样输出
  - 输出表列
    - 要输出的数据

- 功能：按指定格式向显示器输出数据

- 格式字符

  | **格式符** | **作用**           |
  | ---------- | ------------------ |
  | d          | 十进制整数         |
  | x,X        | 十六进制无符号整数 |
  | o          | 八进制无符号整数   |
  | u          | 无符号十进制整数   |
  | c          | 单一字符           |
  | s          | 字符串             |
  | e,E        | 指数形式浮点小数   |
  | f          | 小数形式浮点小数   |

- 示例

  ```c
  int a=567;	printf ("输出数字：%d",a);	//输出数字：567
  int a=255;	printf("%x",a); 		//ff
  int a=65;	printf("%o",a); 		//101
  int a=567;	printf("%u",a); 		//567
  char a=65;	printf("%c",a);		//A
  printf("%s","ABC"); 		//ABC
  float a=567.789;	printf("%e",a);	//5.677890e+02
  float a=567.789;	printf("%f",a);	// 567.789000
  float a=567.789;	printf("%g",a);	// 567.789
  ```

- 附加格式说明符

  | **修饰符 ** | **功能**                                                     |
  | :---------- | ------------------------------------------------------------ |
  | m           | 输出数据域宽，数据长度<m，左补空格；否则按实际输出           |
  | .n          | 对实数，指定小数点后位数（四舍五入）,  对字符串，指定实际输出位数 |
  | -           | 输出数据在域内左对齐（缺省右对齐)                            |
  | +           | 指定在有符号数的正数前显示正号(+)                            |
  | 0           | 输出数值时指定左面不使用的空位置自动填0                      |
  | #           | 在八进制和十六进制数前显示前导0，0x                          |
  | l           | 在d,  o, x, u前，指定输出精度为long型                        |
  | l           | 在e,  f, g前，指定输出精度为double型                         |

  - 示例

    ```c
    int a=1234;
    float f=123.456;
    char ch='a';
    printf("%8d,%2d\n",a,a);
    printf("%f,%8f,%8.1f,%.2f\n",f,f,f,f);
    printf("%3c\n",ch);
    
    printf("-------------");
    
    printf("%08d\n",a);
    printf("%010.2f\n",f);
    printf("%0+8d\n",a);
    printf("%0+10.2f\n",f);
    ```

    <img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/web/wuhu/20231106162506.png" alt="image-20231106162506874" style="zoom:80%;" align='left'/>

###### putchar

- 格式: putchar( c )

- 参数: c为字符常量、变量或表达式

- 功能：把字符c输出到显示器上

- 示例

  ```c
  #include <stdio.h>
  main()
  {   int c;
      char a;
      c=65;  a='B';
      putchar(c); putchar('\n'); putchar(a);
  }
  ---------------
  运算结果为：A
  	      B
  ```

###### puts

- 格式: puts( str )

- 参数: str为字符串

- 功能：把字符串str输出到显示器上,使用 puts() 显示字符串时，系统会自动在其后添加一个换行符

- 示例

  ```c
  puts("我爱你!");  //直接输出字符串
  ```

##### 3、输入

###### 输入语句汇总：接受用户通过键盘输入的数据

| 语句        | 功能                                                         | 示例                                                         |
| ----------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| gets()      | 获取一行数据，并作为字符串处理,主要优势是可以读取含有空格的字符串 | char author[30];    gets(author);                            |
| getchar()   | 用于输入单个字符                                             | char c;     c = getchar();                                   |
| **scanf()** | **和 printf() 类似，scanf() 可以输入多种类型的数据**         | **scanf("%d", &a); // 输入整数并赋值给变量a** ，其中&是and符号，用于获取变量的内存地址,主要是用于能够获取数据后赋给对应的变量 |

###### scanf

- 格式: scanf(“格式控制串”，地址表）

- 功能：按指定格式从键盘读入数据，存入地址表指定存储单元中,并按回车键结束

- 地址表：变量的地址，常用取地址运算符&

- 格式控制串

  | **格式符号** | **作用**           |
  | ------------ | ------------------ |
  | d            | 十进制整数         |
  | x,  X        | 十六进制无符号整数 |
  | o            | 八进制无符号整数   |
  | u            | 无符号十进制整数   |
  | c            | 单一字符           |
  | s            | 字符串             |
  | e            | 指数形式浮点小数   |
  | f            | 小数形式浮点小数   |

- 格式控制串的修饰符

  | **修饰符** | **功能**                                                     |
  | ---------- | ------------------------------------------------------------ |
  | h          | 用于d,  o, x前，指定输入为short型整数                        |
  | l          | 用于d,  o, x前，指定输入为long型整数  ，用于e,  f前，指定输入为double型实数 |
  | m          | 指定输入数据宽度，遇空格或不可转换字符结束                   |
  | *          | 抑制符，指定输入项读入后不赋给变量                           |

- 示例

  ```c
  char letter;
  int age;
  char url[30];
  float price;
  
  scanf("%c", &letter);
  scanf("%d", &age);
  scanf("%s", url); //可以加&也可以不加&,以后再介绍
  scanf("%f", &price);
  
  printf("你输入的字符是 %c。\n", letter);
  printf("你输入的年龄是%d，字符串值为 %s，理想的价格是%g。\n", age, url, price);
  ```

- 示例截图：

  ![image-20241223143516423](https://woniumd.oss-cn-hangzhou.aliyuncs.com/java/yujian/20241223143516.png)
  
- 注意事项：输入数据时，遇以下情况认为该数据结束

  - 遇空格、TAB、或回车
  - 碰到非法输入
  - 宽度超出越界
  - 如果输入的和要求的数据类型不一致，那么会得到一个垃圾值（随机值）（整型）
  - 如果输入的和要求数据类型不一致，那么会直接得到`0.000000`(要求格式为浮点数)

- 示例代码：

  ``` c
    8 #include <stdio.h>
    9 
   10 int main(int argc, char *argv[]) {
   11 
   12     // 得到键盘的输入：
   13 
   14     // 1: 得到整数
   15     int num;
   16     //printf("num变量的地址是：%p \n", &num );
   17     puts("请输入一个整数:");    
   18     // & 取址符 ： 把变量的地址得到
   19     scanf("%d" , &num ); // 阻塞式的函数：
   20     printf("你得到的值是：%d \n", num);
   21     
   22 
   23     // 2：得到字符
   24     char ch;
   25     puts("请输入一个字符：");
   26     scanf(" %c", &ch);
   27     printf("你得到的字符串：%c \n", ch);
   28     
   29     // 3: 得到字符串
   30     char name[32];
   31     puts("请输入你的姓名：");
   32     // name这里不要取址符，是因为它是一个数组，数组名默认是一个指针          
   33     scanf(" %s", name);
   34     printf("你输入的姓名是：%s \n", name);
   35     
   36     return 0;
   37 }
  
  ```

  

- 练习：

  - 通过键盘输入自己的一些信息：

    - 名字、年龄、性别、身高、体重 等5个信息
    - 要求分别是：字符串，整数，字符，浮点数，浮点数

  - 并输出一句介绍自身信息的一句话

    

#### 八、原码、反码和补码

##### 1、为什么会有这三种码

因为在计算机中我们需要表示带符号的数字，比如负数、正数等，同时因为计算机的cpu设计架构考虑，在完成数字运算时，一般只能加法，不能直接算减法，但减法 运算可以通过加一个负数来解决。所以本质上还是需要一种机制来在计算机中能够很好的表示正负数同时方便计算机进行处理。

##### 2、原码

（1）概念

原码是用二进制来表示正负数的一种方式。特点是`最高位为符号位，其余位置用于表示数值部分`

（2）公式

```c
最高位为符号位：0表示正数，1表示负数
例子：
1字节表示
正: 0100 0000  ->2^6 =64   1字节最大正数:0111 1111 =1+2+4+8+16+32+64=127
负：1111 1111  ->-127   1000 0000 表示-128
```

比如c语言中short类型是2个字节。那么每个字节有8个位子存放0和1，一共16位，最高位0表示正数，1表示负数，就可以有15个位置来表示数值。那么short类型能够表示的范围是`2的-15次方`到`2的15次方-1`，也就是-32768到正32768 ，因为0也要占2字节的一种排列方式。

但最终计算机用二进制表示数字并没有采用原码，因为有减法问题

（3）问题

计算机中并没有采用原码形式来直接表示二进制，因为有一些问题需要处理。比较典型的就是减法运算。

- 减法运算：比如`-4`+`4`正确结果应该是0，我们进行运算之后:`1000 0100 + 0000 0100`的结果为`1000 1000`为-8 ，结果不对，所以原码并不能作为最终计算机表示正负数的形式。

  ```c
  4: 0000 0100
  -4:1000 0100
  4+-4 =4-4 = 0(正确)
  二进制计算过程；
  0000 0100 +
  1000 0100
  1000 1000 =-8
  ```

  

##### 3、反码

（1）概念

反码就是在原码的基础之上进行一些调整之后新的表示带符号二进制的表示方法。

（2）要点

反码是在原码的基础上除符号位之外所有位取反，就得到原码对应的反码（负数），**正数**的反码和原码一样，没有变化

（3）例子：获取1000 1000  和0001 0001 的反码

```c
1. 1000 1000
负数：除符号位其他取反 -> 1111 0111(反)
2. 0001 0001 
正数：不变化  -> 0001 0001（原、反）
```

（4）问题

反码确实解决了减法运算的一些问题，但是仍会出现为`-0`的情况，比如`4-4`的结果就是`-0`,所以才有了补码的出现，也就是计算机最终表示带符号二进制的方案。

```c
二进制计算过程；
0000 0100(反) +
1111 1011（反）
=
1111 1111（反）->转为原码->1000 0000 =-128
```



##### 4、补码

（1）概念

补码跟反码原码一样是用于表示带符号二进制的方式，也是**计算机最终表示带符号二进制的方案**。

（2）要点

- 正数的补码和原码一样，**也就是说正数的原码、反码和补码都是一样的**
- 负数的补码是在其**反码**的基础之上末位+1 而得到

（3）例子

获取-4 和4的补码

```c
4： 0000 0100 （补）
-4: 1111 1100 (补)
= 0000 0000（补、反、原）
```

进行减法运算：

```c
4： 0000 0100 （补）
-4: 1111 1100 （补）
运算：
0000 0100 + 1111 1100 =00000000
```

**注意**：补码运算得到的结果也是补码

**总结**：补码很好的解决+0和-0的问题，同时也保证了在进行减法运算的正确性